name = "distill"
resources = "gpus"

[matrix]
dataset = ["configs/dataset/MELD--E.toml"]

[tasks.T]
command = "uv run emotion-recognize train"
args = [
    "{dataset}",
    "configs/encoders/T.toml",
    "--seed 114",
]

[tasks.distill]
command = "uv run emotion-recognize distill"
args = [
    "{dataset}",
    "{encoder}",
    "configs/fusion/LMF.toml",
    "--teacher-checkpoint checkpoints/training/MELD--E/T--T",
    "--seed 114",
]
deps = ["T"]
[tasks.distill.matrix]
encoder = [
    "configs/encoders/T+A.toml",
    "configs/encoders/T+V.toml",
    "configs/encoders/T+A+V.toml",
]
