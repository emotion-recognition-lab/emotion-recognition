name = "MoE"
resources = "gpus"

[matrix]
dataset = ["MELD--E"]
seed = [0, 1, 42, 114, 2024]

[tasks.MoE-unimodal]
command = "uv run emotion-recognize train"
args = [
    "configs/dataset/{dataset}.toml",
    "configs/encoders/{modals}.toml",
    "{classifier}",
    "--seed {seed}",
]
[tasks.MoE-unimodal.matrix]
modals = [
    "T",
    "A",
    "V",
]
classifier = [
    "",
    "configs/classifier/4xE.toml",
    "configs/classifier/8xE.toml",
]

[tasks.MoE-multimodal]
command = "uv run emotion-recognize train"
args = [
    "configs/dataset/{dataset}.toml",
    "configs/encoders/{modals}.toml",
    "{fusion}",
    "{classifier}",
    "--seed {seed}",
]
[tasks.MoE-multimodal.matrix]
modals = [
    "T+A",
    "T+V",
    "T+A+V",
]
fusion = [
    "configs/fusion/LMF.toml",
    "configs/fusion/MoE/LMF.toml",
    "configs/fusion/MoE/ConcatFusionMoE.toml",
]
classifier = [
    "",
    "configs/classifier/4xE.toml",
    "configs/classifier/8xE.toml",
]
